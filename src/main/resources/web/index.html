<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TinyClaw Console</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="app">
        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <nav class="sidebar">
            <div class="logo">
                <span class="logo-icon">ü¶û</span>
                <span class="logo-text">TinyClaw</span>
                <span class="version">v0.1.0</span>
            </div>
            
            <div class="nav-section">
                <div class="nav-group" data-group="chat">
                    <div class="nav-group-header">
                        <span class="nav-icon">üí¨</span>
                        <span>Chat</span>
                        <span class="nav-arrow">‚ñæ</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="#chat" class="nav-item active" data-page="chat">
                            <span class="nav-icon">‚óã</span>
                            <span>Chat</span>
                        </a>
                    </div>
                </div>
                
                <div class="nav-group" data-group="control">
                    <div class="nav-group-header">
                        <span class="nav-icon">üì°</span>
                        <span>Control</span>
                        <span class="nav-arrow">‚ñæ</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="#channels" class="nav-item" data-page="channels">
                            <span class="nav-icon">üì∂</span>
                            <span>Channels</span>
                        </a>
                        <a href="#sessions" class="nav-item" data-page="sessions">
                            <span class="nav-icon">üë§</span>
                            <span>Sessions</span>
                        </a>
                        <a href="#cron" class="nav-item" data-page="cron">
                            <span class="nav-icon">‚è∞</span>
                            <span>Cron Jobs</span>
                        </a>
                    </div>
                </div>
                
                <div class="nav-group" data-group="agent">
                    <div class="nav-group-header">
                        <span class="nav-icon">‚ö°</span>
                        <span>Agent</span>
                        <span class="nav-arrow">‚ñæ</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="#workspace" class="nav-item" data-page="workspace">
                            <span class="nav-icon">üìÅ</span>
                            <span>Workspace</span>
                        </a>
                        <a href="#skills" class="nav-item" data-page="skills">
                            <span class="nav-icon">üß©</span>
                            <span>Skills</span>
                        </a>
                    </div>
                </div>
                
                <div class="nav-group" data-group="settings">
                    <div class="nav-group-header">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Settings</span>
                        <span class="nav-arrow">‚ñæ</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="#models" class="nav-item" data-page="models">
                            <span class="nav-icon">ü§ñ</span>
                            <span>Models</span>
                        </a>
                        <a href="#environments" class="nav-item" data-page="environments">
                            <span class="nav-icon">üåç</span>
                            <span>Environments</span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="main-content">
            <header class="page-header">
                <h1 class="page-title" id="pageTitle">Chat</h1>
            </header>
            
            <div class="page-content">
                <!-- Chat È°µÈù¢ -->
                <div id="page-chat" class="page active">
                    <div class="chat-container">
                        <div class="chat-sidebar">
                            <button class="btn btn-primary btn-block" id="newChatBtn">+ New Chat</button>
                            <div class="chat-history" id="chatHistory"></div>
                        </div>
                        <div class="chat-main">
                            <div class="chat-messages" id="chatMessages">
                                <div class="chat-welcome">
                                    <div class="welcome-icon">ü¶û</div>
                                    <h2>Hello, how can I help you today?</h2>
                                    <p>I am a helpful assistant that can help you with your questions.</p>
                                </div>
                            </div>
                            <div class="chat-input-container">
                                <textarea class="chat-input" id="chatInput" placeholder="Type your message..." rows="1"></textarea>
                                <button class="btn btn-primary btn-send" id="sendBtn">‚Üë</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Channels È°µÈù¢ -->
                <div id="page-channels" class="page">
                    <p class="page-desc">Manage and configure message channels</p>
                    <div class="card-grid" id="channelsGrid"></div>
                </div>
                
                <!-- Sessions È°µÈù¢ -->
                <div id="page-sessions" class="page">
                    <p class="page-desc">View and manage active chat sessions</p>
                    
                    <!-- ËøáÊª§Â∑•ÂÖ∑Ê†è -->
                    <div class="sessions-toolbar">
                        <div class="filter-group">
                            <input type="text" class="form-control filter-input" id="filterUserId" placeholder="Filter by User ID">
                            <select class="form-control filter-input" id="filterChannel">
                                <option value="">Filter by Channel</option>
                            </select>
                        </div>
                        <div class="pagination-info" id="paginationInfo">0 / 0</div>
                    </div>
                    
                    <!-- Sessions Ë°®Ê†º -->
                    <div class="sessions-table-container">
                        <table class="sessions-table">
                            <thead>
                                <tr>
                                    <th class="col-checkbox">
                                        <input type="checkbox" id="selectAllSessions">
                                    </th>
                                    <th class="col-id">ID</th>
                                    <th class="col-name">Name</th>
                                    <th class="col-session-id">SessionID</th>
                                    <th class="col-user-id">UserID</th>
                                    <th class="col-action">Action</th>
                                </tr>
                            </thead>
                            <tbody id="sessionsTableBody">
                                <tr>
                                    <td colspan="6" class="empty-state">No sessions yet</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- ÂàÜÈ°µ -->
                    <div class="pagination-container">
                        <div class="pagination-left">Total <span id="totalSessions">0</span> items</div>
                        <div class="pagination-right">
                            <button class="btn-page" id="prevPage">‚óÄ</button>
                            <span class="page-number" id="currentPage">1</span>
                            <button class="btn-page" id="nextPage">‚ñ∂</button>
                        </div>
                    </div>
                </div>
                
                <!-- Cron Jobs È°µÈù¢ -->
                <div id="page-cron" class="page">
                    <p class="page-desc">Schedule and manage automated tasks</p>
                    <div class="cron-toolbar">
                        <button class="btn btn-primary" id="addCronBtn">+ Add Job</button>
                    </div>
                    <div class="cron-list" id="cronList"></div>
                </div>
                
                <!-- Workspace È°µÈù¢ -->
                <div id="page-workspace" class="page">
                    <div class="workspace-header">
                        <div class="workspace-path">
                            <span class="workspace-label">Workspace:</span>
                            <span class="workspace-path-value" id="workspacePath">/app/working</span>
                        </div>
                        <div class="workspace-actions">
                            <button class="btn btn-secondary btn-sm" id="uploadFileBtn">
                                <span>‚Üë</span> Upload
                            </button>
                            <button class="btn btn-secondary btn-sm" id="downloadFileBtn">
                                <span>‚Üì</span> Download
                            </button>
                        </div>
                    </div>
                    
                    <div class="workspace-container">
                        <!-- Â∑¶‰æßÊñá‰ª∂ÂàóË°® -->
                        <div class="workspace-sidebar">
                            <div class="workspace-section">
                                <div class="workspace-section-header">
                                    <h3>Core Files</h3>
                                    <button class="btn-refresh" id="refreshFilesBtn" title="Refresh">
                                        <span>‚Üª</span>
                                    </button>
                                </div>
                                <p class="workspace-section-desc">Bootstrap persona, identity, and tool guidance.</p>
                                <div class="workspace-files" id="workspaceFiles">
                                    <div class="empty-state">Loading files...</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Âè≥‰æßÁºñËæëÂô® -->
                        <div class="workspace-editor">
                            <div class="editor-placeholder" id="editorPlaceholder">
                                <span>Select a file to edit</span>
                            </div>
                            <div class="editor-container" id="editorContainer" style="display: none;">
                                <div class="editor-header">
                                    <span id="editorFileName">Select a file</span>
                                    <button class="btn btn-primary btn-sm" id="saveFileBtn">Save</button>
                                </div>
                                <textarea class="editor-content" id="editorContent" placeholder="Select a file to edit..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Skills È°µÈù¢ -->
                <div id="page-skills" class="page">
                    <p class="page-desc">View and manage agent skills</p>
                    <div class="card-grid" id="skillsGrid"></div>
                </div>
                
                <!-- Models È°µÈù¢ -->
                <div id="page-models" class="page">
                    <div class="section">
                        <h2 class="section-title">Providers</h2>
                        <p class="page-desc">Configure API keys and endpoints for each provider</p>
                        <div class="provider-grid" id="providersGrid"></div>
                    </div>
                    <div class="section">
                        <h2 class="section-title">LLM</h2>
                        <p class="page-desc">Choose the active LLM model from an authorized provider</p>
                        <div class="config-card">
                            <div class="config-card-header">
                                <h3>LLM Configuration</h3>
                                <span class="badge badge-active" id="activeModelBadge">Active: -</span>
                            </div>
                            <div class="config-form llm-config-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Provider</label>
                                        <select class="form-control" id="providerSelect">
                                            <option value="">Select a provider</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Model</label>
                                        <select class="form-control" id="modelSelect">
                                            <option value="">Select a model</option>
                                        </select>
                                    </div>
                                    <div class="form-group form-group-btn">
                                        <button class="btn btn-success" id="saveModelBtn" disabled>
                                            <span class="btn-icon">‚úì</span> Saved
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Environments È°µÈù¢ -->
                <div id="page-environments" class="page">
                    <p class="page-desc">Configure agent default parameters</p>
                    <div class="config-card">
                        <h3>Agent Configuration</h3>
                        <div class="config-form" id="agentConfigForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Max Tokens</label>
                                    <input type="number" class="form-control" id="cfgMaxTokens">
                                </div>
                                <div class="form-group">
                                    <label>Temperature</label>
                                    <input type="number" class="form-control" id="cfgTemperature" step="0.1" min="0" max="2">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Max Tool Iterations</label>
                                    <input type="number" class="form-control" id="cfgMaxToolIterations">
                                </div>
                                <div class="form-group">
                                    <label>Heartbeat Enabled</label>
                                    <select class="form-control" id="cfgHeartbeatEnabled">
                                        <option value="false">No</option>
                                        <option value="true">Yes</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Restrict to Workspace</label>
                                    <select class="form-control" id="cfgRestrictToWorkspace">
                                        <option value="true">Yes</option>
                                        <option value="false">No</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-primary" id="saveAgentConfigBtn">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Modal</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modalCancel">Cancel</button>
                <button class="btn btn-primary" id="modalConfirm">Confirm</button>
            </div>
        </div>
    </div>
    
    <script src="/js/app.js"></script>
</body>
</html>
